(function(){Downloadify=window.Downloadify={queue:{},uid:new Date().getTime(),getTextForSave:function(d){var c=Downloadify.queue[d];if(c){return c.getData()}return""},getFileNameForSave:function(d){var c=Downloadify.queue[d];if(c){return c.getFilename()}return""},getDataTypeForSave:function(d){var c=Downloadify.queue[d];if(c){return c.getDataType()}return""},saveComplete:function(d){var c=Downloadify.queue[d];if(c){c.complete()}return true},saveCancel:function(d){var c=Downloadify.queue[d];if(c){c.cancel()}return true},saveError:function(d){var c=Downloadify.queue[d];if(c){c.error()}return true},addToQueue:function(b){Downloadify.queue[b.queue_name]=b},getUID:function(b){if(b.id==""){b.id="downloadify_"+Downloadify.uid++}return b.id}};Downloadify.create=function(e,d){var f=(typeof(e)=="string"?document.getElementById(e):e);return new Downloadify.Container(f,d)};Downloadify.Container=function(h,c){var b=this;b.el=h;b.enabled=true;b.dataCallback=null;b.filenameCallback=null;b.data=null;b.filename=null;var a=function(){b.options=c;if(!b.options.append){b.el.innerHTML=""}b.flashContainer=document.createElement("span");b.el.appendChild(b.flashContainer);b.queue_name=Downloadify.getUID(b.flashContainer);if(typeof(b.options.filename)==="function"){b.filenameCallback=b.options.filename}else{if(b.options.filename){b.filename=b.options.filename}}if(typeof(b.options.data)==="function"){b.dataCallback=b.options.data}else{if(b.options.data){b.data=b.options.data}}var e={queue_name:b.queue_name,width:b.options.width,height:b.options.height};var d={allowScriptAccess:"always"};var f={id:b.flashContainer.id,name:b.flashContainer.id};if(b.options.enabled===false){b.enabled=false}if(b.options.transparent===true){d.wmode="transparent"}if(b.options.downloadImage){e.downloadImage=b.options.downloadImage}swfobject.embedSWF(b.options.swf,b.flashContainer.id,b.options.width,b.options.height,"10",null,e,d,f);Downloadify.addToQueue(b)};b.enable=function(){var d=document.getElementById(b.flashContainer.id);d.setEnabled(true);b.enabled=true};b.disable=function(){var d=document.getElementById(b.flashContainer.id);d.setEnabled(false);b.enabled=false};b.getData=function(){if(!b.enabled){return""}if(b.dataCallback){return b.dataCallback()}else{if(b.data){return b.data}else{return""}}};b.getFilename=function(){if(b.filenameCallback){return b.filenameCallback()}else{if(b.filename){return b.filename}else{return""}}};b.getDataType=function(){if(b.options.dataType){return b.options.dataType}return"string"};b.complete=function(){if(typeof(b.options.onComplete)==="function"){b.options.onComplete()}};b.cancel=function(){if(typeof(b.options.onCancel)==="function"){b.options.onCancel()}};b.error=function(){if(typeof(b.options.onError)==="function"){b.options.onError()}};a()};Downloadify.defaultOptions={swf:"media/downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:true,append:false,dataType:"string"}})();if(typeof(jQuery)!="undefined"){(function(a){a.fn.downloadify=function(c){return this.each(function(){c=a.extend({},Downloadify.defaultOptions,c);var b=Downloadify.create(this,c);a(this).data("Downloadify",b)})}})(jQuery)}if(typeof(MooTools)!="undefined"){Element.implement({downloadify:function(b){b=$extend(Downloadify.defaultOptions,b);return this.store("Downloadify",Downloadify.create(this,b))}})};